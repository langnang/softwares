<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Question\Core; use Illuminate\Events\Dispatcher; use Illuminate\Support\ServiceProvider; use ModStart\Admin\Config\AdminMenu; use ModStart\Admin\Widget\DashboardItemA; use ModStart\Core\Dao\ModelUtil; use ModStart\Layout\Row; use ModStart\Module\ModuleManager; use Module\Ad\Biz\AdPosition; use Module\Ad\Biz\AdPositionBiz; use Module\Banner\Biz\BannerPosition; use Module\Banner\Biz\BannerPositionBiz; use Module\Member\Biz\Vip\MemberVipBiz; use Module\Partner\Biz\PartnerPosition; use Module\Partner\Biz\PartnerPositionBiz; use Module\Question\Util\QuestionCatUtil; use Module\Vendor\Admin\Config\AdminWidgetDashboard; use Module\Vendor\Admin\Config\AdminWidgetLink; use Module\Vendor\Provider\HomePage\HomePageProvider; use Module\Vendor\Provider\SiteUrl\SiteUrlBiz; use Module\Vendor\Provider\SuperSearch\SuperSearchBiz; class ModuleServiceProvider extends ServiceProvider { public function boot(Dispatcher $wkYBC) { goto miinX; gYICM: if (!ModuleManager::getModuleConfigBoolean('Question', 'viewDisable', false)) { HomePageProvider::register(QuestionHomePageProvider::class); } goto YnNAH; miinX: if (!ModuleManager::getModuleConfigBoolean('Question', 'viewDisable', false)) { AdminWidgetLink::register(function () { $c2rnX = array_values(array_map(function ($vY60h) { return array('题库类别-' . $vY60h['title'], modstart_web_url('question/cat/' . $vY60h['id'])); }, QuestionCatUtil::allShowing())); return AdminWidgetLink::build('题库', array_merge(array(array('首页', modstart_web_url('question'))), $c2rnX)); }); } goto v2O74; NMMUK: if (!ModuleManager::getModuleConfigBoolean('Question', 'viewDisable', false)) { goto CIwP2; mLYjG: if (ModuleManager::isModuleEnabled('Partner') && class_exists(PartnerPositionBiz::class)) { PartnerPositionBiz::register(PartnerPosition::make('questionHome', '题库首页')); } goto Ukn2S; twIpu: if (modstart_module_enabled('Banner')) { BannerPositionBiz::register(BannerPosition::make('questionHome', '题库系统首页')); } goto s7MGE; Ukn2S: if (class_exists(SiteUrlBiz::class)) { SiteUrlBiz::register(QuestionSiteUrlBiz::class); } goto uZoED; RDaUr: MemberVipBiz::register(QuestionMemberVipBiz::class); goto twIpu; s7MGE: if (modstart_module_enabled('Ad', '>=1.2.0')) { AdPositionBiz::registerAll(AdPosition::make('pcQuestionViewRight', '题目查看右侧'), AdPosition::make('pcQuestionCatRight', '题库类别右侧')); } goto mLYjG; CIwP2: SuperSearchBiz::register(QuestionSuperSearchBiz::class); goto RDaUr; uZoED: } goto bWgse; YnNAH: AdminMenu::register(function () { return array(array('title' => '题库管理', 'icon' => 'file', 'sort' => 150, 'children' => array(array('title' => '题库类别', 'url' => '\\Module\\Question\\Admin\\Controller\\QuestionCatController@index'), array('title' => '题库分类', 'url' => '\\Module\\Question\\Admin\\Controller\\QuestionChapterController@index'), array('title' => '题目标签组', 'url' => '\\Module\\Question\\Admin\\Controller\\QuestionTagGroupController@index'), array('title' => '题目标签', 'url' => '\\Module\\Question\\Admin\\Controller\\QuestionTagController@index'), array('title' => '题目导入', 'url' => '\\Module\\Question\\Admin\\Controller\\QuestionController@import'), array('title' => '题目管理', 'url' => '\\Module\\Question\\Admin\\Controller\\QuestionController@index'), ModuleManager::getModuleConfigBoolean('Question', 'viewDisable', false) ? null : array('title' => '题目设置', 'url' => '\\Module\\Question\\Admin\\Controller\\ConfigController@setting'), ModuleManager::getModuleConfigBoolean('Question', 'viewDisable', false) ? null : array('title' => '题目搜索索引', 'url' => '\\Module\\Question\\Admin\\Controller\\SuperSearchController@index')))); }); goto NMMUK; v2O74: AdminWidgetDashboard::registerIcon(function (Row $ZUrcV) { $ZUrcV->column(3, DashboardItemA::makeIconNumberTitle('iconfont icon-details', ModelUtil::count('question'), '题目总数', modstart_admin_url('question'))); }); goto gYICM; bWgse: } public function register() { } }