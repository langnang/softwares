<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Member\Config; use ModStart\Core\Exception\BizException; use Module\Member\Oauth\AbstractOauth; class MemberOauth { private static $list = array(); public static function register($REa1I) { self::$list[] = $REa1I; } public static function hasEnableItems() { $pCem1 = self::get(); return !empty($pCem1); } public static function hasItems() { goto bEUhs; JACY8: return !empty($pCem1); goto cZz3w; bEUhs: $pCem1 = self::get(); goto bQje7; bQje7: $pCem1 = array_filter($pCem1, function ($REa1I) { return $REa1I->hasRender(); }); goto JACY8; cZz3w: } public static function get($AfXAM = null) { goto YJCjd; EJ1iL: return null; goto yOGfU; YJCjd: static $x6JEB = null; goto acD0e; JrIaY: if (null === $AfXAM) { return $x6JEB; } goto mBEam; acD0e: if (null === $x6JEB) { $x6JEB = array(); foreach (self::$list as $REa1I) { if ($REa1I instanceof \Closure) { $REa1I = call_user_func($REa1I); } $x6JEB = array_merge($x6JEB, $REa1I); } } goto JrIaY; mBEam: foreach ($x6JEB as $REa1I) { if ($REa1I->name() == $AfXAM) { return $REa1I; } } goto EJ1iL; yOGfU: } public static function getByOauthKey($AfXAM) { foreach (self::get() as $wyN7g) { if ($wyN7g->oauthKey() == $AfXAM) { return $wyN7g; } } return null; } public static function getOrFail($AfXAM) { goto mgHAA; mgHAA: $wyN7g = self::get($AfXAM); goto l9gKZ; l9gKZ: BizException::throwsIfEmpty('授权登录信息(' . $AfXAM . ')未找到', $wyN7g); goto PL03Y; PL03Y: return $wyN7g; goto lQasz; lQasz: } private static function sort() { static $EnCPs = 1000; return $EnCPs++; } }