<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Payment\Common\Cmb\Data; use Payment\Common\PayException; use Payment\Utils\Rc4Encrypt; class RefundData extends CmbBaseData { protected function checkDataParam() { goto DztGW; QSJBA: $vWFlB = $this->refund_no; goto XYB2c; xpOW_: if (empty($S17yg) || mb_strlen($S17yg) !== 8) { throw new PayException('商户订单日期必须提供,格式：yyyyMMdd'); } goto Xy7BD; WRfPy: if (empty($uyhSi) || !is_numeric($uyhSi)) { throw new PayException('退款金额,格式xxxx.xx'); } goto I02Ii; ZIf5j: $uyhSi = $this->refund_fee; goto hnvAM; hnvAM: $Jf0Nk = $this->operator_id; goto xpOW_; I02Ii: if (empty($Jf0Nk)) { throw new PayException('必须提供 商户结账系统的操作员号'); } goto dKkBC; DztGW: parent::checkDataParam(); goto QSJBA; BeDLr: if (empty($vWFlB) && mb_strlen($vWFlB) < 21) { throw new PayException('退款流水号,商户生成，不能超过20位'); } goto WRfPy; lUQFl: $I7OQF = $this->out_trade_no; goto ZIf5j; XYB2c: $S17yg = $this->date; goto lUQFl; Xy7BD: if (empty($I7OQF)) { throw new PayException('必须提供商户网站唯一订单号。'); } goto BeDLr; dKkBC: } protected function getReqData() { goto wq4wW; dpY35: $sx3MN = array('dateTime' => $this->dateTime, 'branchNo' => $this->branchNo, 'merchantNo' => $this->merchantNo, 'date' => $this->date, 'orderNo' => $this->out_trade_no, 'refundSerialNo' => trim($this->refund_no), 'amount' => $this->refund_fee, 'desc' => $this->reason, 'operatorNo' => $this->operator_id, 'encrypType' => 'RC4', 'pwd' => $DeAgK->encrypt($this->opPwd)); goto z3n9r; wq4wW: $DeAgK = new Rc4Encrypt($this->merKey); goto dpY35; z3n9r: return $sx3MN; goto kcW_x; kcW_x: } }