(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["brick-module-member-message"],{"013c":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("c975"),i("a9e3"),i("ac1f"),i("5319"),i("acd8");var a={type:"scrolldone",target:{id:"",offsetLeft:0,offsetTop:0,dataset:{}},currentTarget:{id:"",offsetLeft:0,offsetTop:0,dataset:{}},detail:{}},n={props:{backgroundTextStyle:{type:String,default:"dark",validator:function(t){return-1!==["dark","light"].indexOf(t)}},backgroundColor:{type:String,default:"#ffffff"},backgroundColorTop:{type:String,default:"#ffffff"},backgroundColorBottom:{type:String,default:"#ffffff"},scrollTop:{type:String,default:""},scrollDuration:{type:Number,default:300},pageStyle:{type:String,default:""},enablePullDownRefresh:{type:[Boolean,String],default:!1},rootFontSize:{type:String,default:""}},created:function(){var t=this,e=getCurrentPages()[0];this.$pageVm=e.$vm||e,uni.onWindowResize((function(e){t.$emit("resize",e)})),this.$pageVm.$on("hook:onPageScroll",(function(e){t.$emit("scroll",e)})),this.$watch("backgroundTextStyle",(function(){t.setBackgroundTextStyle()})),this.$watch((function(){return[t.rootFontSize,t.pageStyle]}),(function(){t.setPageMeta()})),this.$watch((function(){return[t.backgroundColor,t.backgroundColorTop,t.backgroundColorBottom]}),(function(){t.setBackgroundColor()})),this.$watch((function(){return[t.scrollTop,t.scrollDuration]}),(function(){t.pageScrollTo()}))},beforeMount:function(){this.setBackgroundColor(),(this.rootFontSize||this.pageStyle)&&this.setPageMeta(),this.backgroundTextStyle&&this.setBackgroundTextStyle(),this.scrollTop&&this.pageScrollTo()},methods:{setPullDownRefresh:function(t,e){t.setStyle({pullToRefresh:{support:e,style:"Android"===plus.os.name?"circle":"default"}})},setPageMeta:function(){uni.setPageMeta({pageStyle:this.pageStyle,rootFontSize:this.rootFontSize})},setBackgroundTextStyle:function(){},setBackgroundColor:function(){},pageScrollTo:function(){var t=this,e=String(this.scrollTop);if(-1!==e.indexOf("rpx")&&(e=uni.upx2px(e.replace("rpx",""))),e=parseFloat(e),!isNaN(e)){var i=function i(n){n.scrollTop===e&&(t.$pageVm.$off("hook:onPageScroll",i),t.$emit("scrolldone",a))};uni.pageScrollTo({scrollTop:e,duration:this.scrollDuration,success:function(){t.$pageVm.$on("hook:onPageScroll",i)}})}}}};e.default=n},"1c72":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.ListerMixin=e.ComponentListerMixin=void 0,i("ac1f"),i("841c"),i("4de4"),i("99af"),i("d81d");var a=i("379e"),n={data:function(){return{listLoading:!1,order:{field:null,type:"asc"},list:{page:1,pageSize:10,records:[],total:0},selectIds:[],filter:[],search:{}}},onPullDownRefresh:function(t){this.doSearch()},onReachBottom:function(t){this.doNextPage()},methods:{HandleInput:a.HandleInput,RouterTo:a.RouterTo,init:function(){this.$refs.listStatus.init(),this.doList(1)},doSearch:function(){this.$refs.listStatus.init(),this.doList(1)},doSearchReset:function(){t.log("implements doSearchReset")},onSortChange:function(t,e,i){null===i?(this.order.field=null,this.order.type=null):(this.order.field=t.prop,this.order.type="ascending"===i?"asc":"desc"),this.doList(1)},doList:function(e){t.error("should implements doList")},doListProcess:function(t,e,i,a){var n=this;i=i||{},e=e||this.list.page,this.list.page=e,1===this.list.page&&(this.list.records=[]),this.listLoading=!0,this.$api.post(t,Object.assign({order:JSON.stringify(this.order),search:JSON.stringify(this.search),filter:JSON.stringify(this.filter),page:this.list.page,pageSize:this.list.pageSize},i),(function(t){n.listLoading=!1,uni.stopPullDownRefresh(),n.list.page=t.data.page,n.list.pageSize=t.data.pageSize,n.list.records=n.list.records.concat(t.data.records),n.list.total=t.data.total,t.data.records.length!==t.data.pageSize&&n.$refs.listStatus&&n.$refs.listStatus.noMore(),a&&a(t)}),(function(t){n.listLoading=!1,uni.stopPullDownRefresh()}))},doNextPage:function(){this.$refs.listStatus.shouldNext()&&this.doList(this.list.page+1)}}};e.ComponentListerMixin=n;var o={data:function(){return{mode:"concat",listLoading:!1,order:{field:null,type:"asc"},list:{page:1,pageSize:10,records:[],total:0},selectIds:[],filter:[],search:{}}},onReady:function(){var t=this;this.$starter.boot((function(){t.init()}))},onPullDownRefresh:function(t){this.doSearch()},onReachBottom:function(t){this.doNextPage()},mounted:function(){},methods:{HandleInput:a.HandleInput,RouterTo:a.RouterTo,init:function(){this.$refs.listStatus&&this.$refs.listStatus.init(),this.doList(1)},doSearch:function(){this.$refs.listStatus&&this.$refs.listStatus.init(),this.doList(1)},doSearchReset:function(){t.log("implements doSearchReset")},onSortChange:function(t){var e=t.item;e?(this.order.field=e.field,this.order.type=e.type):(this.order.field=null,this.order.type=null),this.doSearch()},doList:function(e){t.error("should implements doList")},doListProcess:function(t,e,i,a){var n=this;i=i||{},e=e||this.list.page,this.list.page=e,this.listLoading=!0,this.$api.post(t,Object.assign({order:JSON.stringify(this.order),search:JSON.stringify(this.search),filter:JSON.stringify(this.filter),page:this.list.page,pageSize:this.list.pageSize},i),(function(t){n.listLoading=!1,uni.stopPullDownRefresh(),1===n.list.page&&(n.list.records=[]),n.list.page=t.data.page,n.list.pageSize=t.data.pageSize,"concat"===n.mode?n.list.records=n.list.records.concat(t.data.records):n.list.records=t.data.records,n.list.total=t.data.total,t.data.records.length!==t.data.pageSize&&n.$refs.listStatus&&n.$refs.listStatus.noMore(),a&&a(t)}),(function(t){n.listLoading=!1,uni.stopPullDownRefresh()}))},doNextPage:function(){this.$refs.listStatus.shouldNext()&&this.doList(this.list.page+1)},onTableSelectChange:function(t){this.selectIds=t.map((function(t){return t.id}))}}};e.ListerMixin=o}).call(this,i("5a52")["default"])},"330b":function(t,e,i){"use strict";i.r(e);var a=i("8d62"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"560b":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={pageMeta:i("6d42").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("page-meta",{attrs:{"root-font-size":"20px"}}),i("v-uni-view",[i("page-header",{attrs:{title:"系统通知"}}),i("v-uni-view",{staticClass:"pb-member-message-list ub-list no-bg"},[t._l(t.list.records,(function(e,a){return i("v-uni-view",{key:e.id,staticClass:"item-message"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-rich-text",{staticClass:"ub-html",attrs:{nodes:e.content||""}})],1),i("v-uni-view",{staticClass:"time"},[i("v-uni-text",{staticClass:"iconfont"},[t._v("")]),t._v(t._s(e.createTime))],1),e.status===t.MemberMessageStatus.UNREAD.value?i("v-uni-view",{staticClass:"dot"}):t._e()],1)})),i("ListStatus",{ref:"listStatus",attrs:{loading:t.listLoading,records:t.list.records}})],2)],1)],1)},o=[]},"6d42":function(t,e,i){"use strict";i.r(e);var a=i("d630"),n=i("8f28");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);var r,s=i("f0c5"),l=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);e["default"]=l.exports},"7c20":function(t,e,i){"use strict";i.r(e);var a=i("fa73"),n=i("bb3f");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("af42");var r,s=i("f0c5"),l=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"2adb057e",null,!1,a["a"],r);e["default"]=l.exports},"818d":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"pb-list-status"},[t.simple||t.loading||!t.isInit||0!==t.records.length?t._e():i("v-uni-view",{staticClass:"empty"},[i("v-uni-view",{staticClass:"iconfont"},[t._v("")]),i("v-uni-view",{staticClass:"text"},[t._v("没有记录")])],1),t.loading&&1!==t.page?i("v-uni-view",{staticClass:"loading"},[i("v-uni-text",{staticClass:"iconfont"},[t._v("")]),i("v-uni-text",[t._v("正在加载中...")])],1):t._e(),!t.loading&&t.isNoMore&&t.records.length>0?i("v-uni-view",{staticClass:"no-more"},[i("v-uni-text",{staticClass:"iconfont"},[t._v("")]),t.total<0?i("v-uni-text",[t._v("没有更多了")]):t._e(),t.total>=0?i("v-uni-text",[t._v("总共"+t._s(t.total)+"条记录")]):t._e()],1):t._e(),t.simple||t.loading||t.isNoMore||!t.isInit?t._e():i("v-uni-view",{staticClass:"pull-to-load"},[t._v("上拉加载更多")])],1)},o=[]},"8d62":function(t,e,i){"use strict";var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("d81d"),i("4de4"),i("a15b");var n=a(i("7c20")),o=i("358c"),r=a(i("92ce")),s=i("1c72"),l={name:"message",mixins:[s.ListerMixin],components:{ListStatus:r.default,ListFilterPanel:n.default},data:function(){return{MemberMessageStatus:o.MemberMessageStatus,search:{status:0}}},methods:{doList:function(t){var e=this;this.doListProcess("member_message",t,{},(function(t){e.doMarkRead(t.data.records.filter((function(t){return t.status===o.MemberMessageStatus.UNREAD.value})).map((function(t){return t.id})))}))},doMarkRead:function(t){t.length>0&&this.$api.post("member_message/read",{_id:t.join(",")},(function(t){}))}}};e.default=l},"8f28":function(t,e,i){"use strict";i.r(e);var a=i("013c"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"92ce":function(t,e,i){"use strict";i.r(e);var a=i("818d"),n=i("b1c6");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("950e");var r,s=i("f0c5"),l=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"aa2648de",null,!1,a["a"],r);e["default"]=l.exports},"931f":function(t,e,i){var a=i("b6ab");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("73d08aec",a,!0,{sourceMap:!1,shadowMode:!1})},"950e":function(t,e,i){"use strict";var a=i("931f"),n=i.n(a);n.a},af42:function(t,e,i){"use strict";var a=i("c8c3"),n=i.n(a);n.a},b1c6:function(t,e,i){"use strict";i.r(e);var a=i("efa9"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},b6ab:function(t,e,i){var a=i("4bad");e=a(!1),e.push([t.i,"[data-v-aa2648de]:root,\nuni-page-body[data-v-aa2648de]{--color-primary:var(--theme-color-primary,#698af4);--color-primary-light:var(--theme-color-primary-light,#819df6);--color-primary-dark:var(--theme-color-primary-dark,#5177f2);--color-success:var(--theme-color-success,#28a745);--color-success-dark:var(--theme-color-success-dark,#1e7e34);--color-warning:var(--theme-color-warning,#fd7e14);--color-warning-dark:var(--theme-color-warning-dark,#dc6502);--color-danger:var(--theme-color-danger,#dc3545);--color-danger-dark:var(--theme-color-danger-dark,#bd2130);--color-link:var(--theme-color-link,#007bff);--color-link-light:var(--theme-color-link-light,#0062cc);--color-link-dark:var(--theme-color-link-dark,#3395ff);--color-default:var(--theme-color-default,#f7f7f7);--color-input-placeholder:var(--theme-color-input-placeholder,#c4cfdb);--size-radius:var(--theme-size-radius,0.25rem);--size-margin:var(--theme-size-margin,0.5rem);--size-margin-lg:var(--theme-size-margin-lg,2rem);--size-margin-1-2:var(--theme-size-margin-1-2,0.25rem);--size-margin-1-2-negative:var(--theme-size-margin-1-2-negative,-0.25rem);--font-size-root:var(--theme-font-size-root,20px);--font-size:var(--theme-font-size,0.65rem);--font-size-medium:var(--theme-font-size,0.8rem);--font-size-large:var(--theme-font-size-large,1rem);--font-size-small:var(--theme-font-size-small,0.6rem);--container-width:var(--theme-container-width,55rem)}[data-v-aa2648de]:root,\nuni-page-body[data-v-aa2648de]{--color-primary:var(--theme-color-primary,#698af4);--color-primary-light:var(--theme-color-primary-light,#819df6);--color-primary-dark:var(--theme-color-primary-dark,#5177f2)}.pb-list-status[data-v-aa2648de]{text-align:center;min-height:%?120?%;background:transparent}.pb-list-status .pull-to-load[data-v-aa2648de],\n.pb-list-status .no-more[data-v-aa2648de],\n.pb-list-status .loading[data-v-aa2648de],\n.pb-list-status .empty[data-v-aa2648de]{text-align:center;color:#999;padding:%?40?% 0;min-height:%?40?%;line-height:%?40?%}.pb-list-status .no-more .iconfont[data-v-aa2648de]{margin-right:%?10?%}.pb-list-status .loading .iconfont[data-v-aa2648de]{display:inline-block;margin:0;padding:0;margin-right:%?10?%;width:%?40?%;height:%?40?%;text-align:center;line-height:%?40?%;-webkit-animation:load-progress-spinner-data-v-aa2648de 2s linear infinite;animation:load-progress-spinner-data-v-aa2648de 2s linear infinite}.pb-list-status .empty .iconfont[data-v-aa2648de]{font-size:%?72?%;color:#ccc}@-webkit-keyframes load-progress-spinner-data-v-aa2648de{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes load-progress-spinner-data-v-aa2648de{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}",""]),t.exports=e},bb3f:function(t,e,i){"use strict";i.r(e);var a=i("bcfa"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},bcfa:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i("379e"),n={name:"ListFilterPanel",computed:{headHeight:function(){return this.SystemConfig.HeadHeight}},data:function(){return{visible:!1,singleSelect:null,mulSelect:["选项1"]}},watch:{mulSelect:{handler:function(e,i){t.log(JSON.stringify(this.mulSelect))},immediate:!0}},methods:{HandleInput:a.HandleInput,show:function(){this.visible=!0},doConfirm:function(){this.visible=!1},doCancel:function(){this.visible=!1}}};e.default=n}).call(this,i("5a52")["default"])},c682:function(t,e,i){var a=i("4bad");e=a(!1),e.push([t.i,".pb-list-filter-panel[data-v-2adb057e]{text-align:left}.pb-list-filter-panel .head[data-v-2adb057e]{padding:0 %?10?%;color:#999;background:#eee}.pb-list-filter-panel .foot[data-v-2adb057e]{padding:%?10?%;position:absolute;bottom:0;left:0;right:0;border-top:1px solid #eee;text-align:center}.pb-list-filter-panel .foot .cu-btn[data-v-2adb057e]{width:30%;margin:0 %?10?%}",""]),t.exports=e},c8c3:function(t,e,i){var a=i("c682");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("5d3ee015",a,!0,{sourceMap:!1,shadowMode:!1})},c9b9:function(t,e,i){"use strict";i.r(e);var a=i("560b"),n=i("330b");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);var r,s=i("f0c5"),l=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);e["default"]=l.exports},d630:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticStyle:{display:"none"}},[t._t("default")],2)},o=[]},efa9:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("a9e3");var a={name:"ListStatus",props:{records:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},total:{type:Number,default:-1},page:{type:Number,default:-1},simple:{type:Boolean,default:!1}},data:function(){return{isInit:!1,isNoMore:!1}},methods:{reset:function(){this.isInit=!1,this.isNoMore=!1},noMore:function(){this.isNoMore=!0},init:function(){this.isInit=!0},shouldNext:function(){return!(this.isNoMore||this.loading)}}};e.default=a},fa73:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"cu-modal drawer-modal justify-end",class:{show:t.visible},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.visible=!1}}},[i("v-uni-view",{staticClass:"cu-dialog basis-lg pb-list-filter-panel",style:[{top:"0px",height:"100vh"}],on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[i("v-uni-view",{staticClass:"head",style:[{height:t.headHeight+"px",lineHeight:t.headHeight+"px"}]},[t._v("筛选")]),i("v-uni-view",{staticClass:"body"},[t._t("default")],2),i("v-uni-view",{staticClass:"foot"},[i("v-uni-button",{staticClass:"cu-btn primary",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.doConfirm.apply(void 0,arguments)}}},[t._v("确定")]),i("v-uni-button",{staticClass:"cu-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.doCancel.apply(void 0,arguments)}}},[t._v("取消")])],1)],1)],1)},o=[]}}]);