<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Member\Core; use Illuminate\Events\Dispatcher; use Illuminate\Support\ServiceProvider; use ModStart\Admin\Config\AdminMenu; use ModStart\Admin\Widget\DashboardItemA; use ModStart\Core\Dao\ModelUtil; use ModStart\Core\Util\ColorUtil; use ModStart\Layout\Row; use ModStart\Module\ModuleManager; use Module\Member\Config\MemberHomeIcon; use Module\Member\Config\MemberMenu; use Module\Member\Provider\MemberDeleteScheduleProvider; use Module\Member\Provider\VerifySmsTemplateProvider; use Module\PayCenter\Biz\PayCenterBiz; use Module\Vendor\Admin\Config\AdminWidgetDashboard; use Module\Vendor\Admin\Config\AdminWidgetLink; use Module\Vendor\Provider\Schedule\ScheduleProvider; use Module\Vendor\Provider\SmsTemplate\SmsTemplateProvider; class ModuleServiceProvider extends ServiceProvider { public function boot(Dispatcher $V_pf2) { goto nmOeB; gklLl: SmsTemplateProvider::register(VerifySmsTemplateProvider::class); goto YJUk5; g8U0a: AdminWidgetDashboard::registerIcon(function (Row $vTw5z) { $vTw5z->column(3, DashboardItemA::makeIconNumberTitle('iconfont icon-user', ModelUtil::count('member_user', array('isDeleted' => false)), '用户', modstart_admin_url('member'), ColorUtil::randomColor())); }); goto bPDaz; ncEJ8: AdminMenu::register(function () { return array(array('title' => '用户中心', 'icon' => 'users', 'sort' => 100, 'children' => array(array('title' => '用户统计', 'url' => '\\Module\\Member\\Admin\\Controller\\MemberDashboardController@index'), array('title' => '用户管理', 'url' => '\\Module\\Member\\Admin\\Controller\\MemberController@index'), array('title' => '用户资产', 'children' => array(ModuleManager::getModuleConfigBoolean('Member', 'moneyEnable') ? array('title' => '用户钱包流水', 'url' => '\\Module\\Member\\Admin\\Controller\\MemberMoneyLogController@index') : null, ModuleManager::getModuleConfigBoolean('Member', 'moneyEnable') ? array('title' => '用户钱包提现申请', 'url' => '\\Module\\Member\\Admin\\Controller\\MemberMoneyCashController@index') : null, ModuleManager::getModuleConfigBoolean('Member', 'creditEnable') ? array('title' => '用户积分流水', 'url' => '\\Module\\Member\\Admin\\Controller\\MemberCreditLogController@index') : null)), ModuleManager::getModuleConfigBoolean('Member', 'vipEnable') ? array('title' => '用户VIP订单', 'url' => '\\Module\\Member\\Admin\\Controller\\MemberVipOrderController@index') : null, array('title' => '用户设置', 'sort' => 999999, 'children' => array(array('title' => '功能设置', 'url' => '\\Module\\Member\\Admin\\Controller\\ConfigController@setting'), array('title' => '用户协议', 'url' => '\\Module\\Member\\Admin\\Controller\\ConfigController@agreement'), ModuleManager::getModuleConfigBoolean('Member', 'moneyEnable') ? array('title' => '钱包设置', 'url' => '\\Module\\Member\\Admin\\Controller\\ConfigController@money') : null, ModuleManager::getModuleConfigBoolean('Member', 'vipEnable') ? array('title' => 'VIP设置', 'url' => '\\Module\\Member\\Admin\\Controller\\ConfigController@vip') : null, ModuleManager::getModuleConfigBoolean('Member', 'vipEnable') ? array('title' => 'VIP等级', 'url' => '\\Module\\Member\\Admin\\Controller\\MemberVipSetController@index') : null, ModuleManager::getModuleConfigBoolean('Member', 'groupEnable') ? array('title' => '用户分组', 'url' => '\\Module\\Member\\Admin\\Controller\\MemberGroupController@index') : null))))); }); goto R1gKy; YJUk5: ScheduleProvider::register(MemberDeleteScheduleProvider::class); goto ydL8d; ydL8d: MemberHomeIcon::register(function () { return array(array('title' => '我的', 'sort' => 1000, 'children' => array(array('icon' => 'iconfont icon-card', 'title' => '我的资料', 'url' => modstart_web_url('member_profile')), array('icon' => 'iconfont icon-lock', 'title' => '修改密码', 'url' => modstart_web_url('member_profile/password')), array('icon' => 'iconfont icon-user', 'title' => '修改头像', 'url' => modstart_web_url('member_profile/avatar'))))); }); goto g8U0a; bPDaz: AdminWidgetLink::register(function () { return AdminWidgetLink::build('会员', array(array('注册', modstart_web_url('register')), array('登录', modstart_web_url('login')), array('找回密码', modstart_web_url('retrieve')), ModuleManager::getModuleConfigBoolean('Member', 'vipEnable') ? array('开通VIP', modstart_web_url('member_vip')) : null, ModuleManager::getModuleConfigBoolean('Member', 'moneyEnable') ? array('用户钱包', modstart_web_url('member_money')) : null, ModuleManager::getModuleConfigBoolean('Member', 'creditEnable') ? array('用户积分', modstart_web_url('login')) : null)); }); goto rFeMH; nmOeB: MemberMenu::register(function () { return array(array('icon' => 'details', 'title' => '资产', 'sort' => 900, 'children' => array(ModuleManager::getModuleConfigBoolean('Member', 'moneyEnable') ? array('title' => '我的钱包', 'url' => modstart_web_url('member_money')) : null, ModuleManager::getModuleConfigBoolean('Member', 'creditEnable') ? array('title' => '我的' . ModuleManager::getModuleConfig('Member', 'creditName', '积分'), 'url' => modstart_web_url('member_credit')) : null)), array('icon' => 'user', 'title' => '我的', 'sort' => 1000, 'children' => array(ModuleManager::getModuleConfigBoolean('Member', 'addressEnable') ? array('title' => '我的地址', 'url' => modstart_web_url('member_address')) : null, array('icon' => 'iconfont icon-comment', 'title' => '我的消息', 'url' => modstart_web_url('member_message')), array('title' => '账号安全', 'url' => modstart_web_url('member_profile/security')), array('title' => '账号资料', 'url' => modstart_web_url('member_profile/profile')), array('sort' => 999999, 'title' => '退出登录', 'url' => modstart_web_url('logout'))))); }); goto gklLl; rFeMH: if (modstart_module_enabled('PayCenter')) { PayCenterBiz::register(MemberMoneyChargePayCenterBiz::class); PayCenterBiz::register(MemberVipPayCenterBiz::class); } goto ncEJ8; R1gKy: } public function register() { } }