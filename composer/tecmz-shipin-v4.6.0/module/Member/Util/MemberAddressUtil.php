<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Member\Util; use ModStart\Core\Dao\ModelUtil; class MemberAddressUtil { public static function getUserAddress($XK7hT, $wQ1uv) { goto yDvzV; Wc29_: return $HuFy_; goto JATxc; yDvzV: $HuFy_ = ModelUtil::get('member_address', array('id' => $wQ1uv, 'memberUserId' => $XK7hT)); goto YDxE3; YDxE3: ModelUtil::decodeRecordBoolean($HuFy_, array('isDefault')); goto Wc29_; JATxc: } public static function listUserAddresses($XK7hT) { goto hdyGw; hdyGw: $VxRpT = ModelUtil::model('member_address')->where(array('memberUserId' => $XK7hT))->orderBy('id', 'desc')->orderBy('isDefault', 'desc')->get()->toArray(); goto LQHil; LQHil: ModelUtil::decodeRecordsBoolean($VxRpT, array('isDefault')); goto iEG7B; iEG7B: return $VxRpT; goto VYxf4; VYxf4: } public static function delete($wQ1uv) { ModelUtil::delete('member_address', array('id' => $wQ1uv)); } public static function resetDefault($XK7hT) { ModelUtil::update('member_address', array('memberUserId' => $XK7hT), array('isDefault' => false)); } public static function update($wQ1uv, $WAiaw) { return ModelUtil::update('member_address', array('id' => $wQ1uv), $WAiaw); } public static function insert($WAiaw) { return ModelUtil::insert('member_address', $WAiaw); } public static function getDefault($XK7hT) { goto Oqioo; sF59x: return $NHARU; goto HN1fz; anMta: if (empty($NHARU)) { $NHARU = ModelUtil::get('member_address', array('memberUserId' => $XK7hT)); } goto sF59x; Oqioo: $NHARU = ModelUtil::get('member_address', array('memberUserId' => $XK7hT, 'isDefault' => true)); goto anMta; HN1fz: } public static function clearDefault($XK7hT) { ModelUtil::update('member_address', array('memberUserId' => $XK7hT), array('isDefault' => false)); } public static function truncate($XK7hT) { ModelUtil::delete('member_address', array('memberUserId' => $XK7hT)); } }