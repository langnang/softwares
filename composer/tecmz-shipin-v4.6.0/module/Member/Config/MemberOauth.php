<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Member\Config; use ModStart\Core\Exception\BizException; use Module\Member\Oauth\AbstractOauth; class MemberOauth { private static $list = array(); public static function register($qlKQK) { self::$list[] = $qlKQK; } public static function hasEnableItems() { $n_qk7 = self::get(); return !empty($n_qk7); } public static function hasItems() { goto B0HnM; DtiYj: $n_qk7 = array_filter($n_qk7, function ($qlKQK) { return $qlKQK->hasRender(); }); goto ouTUy; B0HnM: $n_qk7 = self::get(); goto DtiYj; ouTUy: return !empty($n_qk7); goto HFOgz; HFOgz: } public static function get($FPiC8 = null) { goto P5Uw0; lQYj9: if (null === $KgN71) { $KgN71 = array(); foreach (self::$list as $qlKQK) { if ($qlKQK instanceof \Closure) { $qlKQK = call_user_func($qlKQK); } $KgN71 = array_merge($KgN71, $qlKQK); } } goto xff8w; Vltad: foreach ($KgN71 as $qlKQK) { if ($qlKQK->name() == $FPiC8) { return $qlKQK; } } goto CEhq3; P5Uw0: static $KgN71 = null; goto lQYj9; xff8w: if (null === $FPiC8) { return $KgN71; } goto Vltad; CEhq3: return null; goto GHFLR; GHFLR: } public static function getByOauthKey($FPiC8) { foreach (self::get() as $dxcjQ) { if ($dxcjQ->oauthKey() == $FPiC8) { return $dxcjQ; } } return null; } public static function getOrFail($FPiC8) { goto HKqzn; HKqzn: $dxcjQ = self::get($FPiC8); goto VkwBf; VkwBf: BizException::throwsIfEmpty('授权登录信息(' . $FPiC8 . ')未找到', $dxcjQ); goto PyhbD; PyhbD: return $dxcjQ; goto ZZUEW; ZZUEW: } private static function sort() { static $jYlxW = 1000; return $jYlxW++; } }