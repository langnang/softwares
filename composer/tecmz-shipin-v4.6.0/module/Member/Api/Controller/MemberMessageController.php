<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Member\Api\Controller; use ModStart\Core\Input\InputPackage; use ModStart\Core\Input\Response; use ModStart\Core\Util\CRUDUtil; use ModStart\Module\ModuleBaseController; use Module\Member\Auth\MemberUser; use Module\Member\Support\MemberLoginCheck; use Module\Member\Util\MemberMessageUtil; class MemberMessageController extends ModuleBaseController implements MemberLoginCheck { public function paginate() { goto V4Mmh; vXh_w: $eMb8v = array('search' => array(), 'order' => array('id', 'desc')); goto hqSrc; HG9wy: $H1G2d = $nIp2z->getInteger('page'); goto d5Am8; N27yl: if (!empty($Vi9_F['status'])) { $eMb8v['search'][] = array('status' => array('equal' => intval($Vi9_F['status']))); } goto FfyFj; FfyFj: $CkO0l = MemberMessageUtil::paginate(MemberUser::id(), $H1G2d, $HugPs, $eMb8v); goto aahdW; V4Mmh: $nIp2z = InputPackage::buildFromInput(); goto HG9wy; hqSrc: $Vi9_F = $nIp2z->getJson('search'); goto N27yl; d5Am8: $HugPs = 10; goto vXh_w; aahdW: return Response::generateSuccessPaginateData($H1G2d, $HugPs, $CkO0l['records'], $CkO0l['total']); goto vThjz; vThjz: } public function delete() { MemberMessageUtil::delete(MemberUser::id(), CRUDUtil::ids()); return Response::generateSuccess(); } public function read() { MemberMessageUtil::updateRead(MemberUser::id(), CRUDUtil::ids()); return Response::generateSuccess(); } public function readAll() { MemberMessageUtil::updateReadAll(MemberUser::id()); return Response::generateSuccess(); } public function deleteAll() { MemberMessageUtil::deleteAll(MemberUser::id()); return Response::generateSuccess(); } }