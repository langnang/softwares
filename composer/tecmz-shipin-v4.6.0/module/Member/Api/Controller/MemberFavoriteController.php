<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Member\Api\Controller; use Illuminate\Routing\Controller; use ModStart\Core\Exception\BizException; use ModStart\Core\Input\InputPackage; use ModStart\Core\Input\Response; use Module\Member\Auth\MemberUser; use Module\Member\Support\MemberLoginCheck; use Module\Member\Util\MemberFavoriteUtil; class MemberFavoriteController extends Controller implements MemberLoginCheck { public function favorite() { goto p6acB; qgIA7: if (MemberFavoriteUtil::exists(MemberUser::id(), $Rup27, $OLo75)) { return Response::generateError('已经收藏'); } goto s_CGE; JOZH8: BizException::throwsIfEmpty('categoryId为空', $OLo75); goto qgIA7; vluFH: if ($R7X4g = $nIp2z->getTrimString('redirect')) { return Response::generate(0, null, null, $R7X4g); } goto w6BKE; P4a0o: $Rup27 = $nIp2z->getTrimString('category'); goto Xciw1; Xciw1: $OLo75 = $nIp2z->getTrimString('categoryId'); goto JBR6M; s_CGE: MemberFavoriteUtil::add(MemberUser::id(), $Rup27, $OLo75); goto vluFH; w6BKE: return Response::generateSuccess(); goto bI10U; JBR6M: BizException::throwsIfEmpty('category为空', $Rup27); goto JOZH8; p6acB: $nIp2z = InputPackage::buildFromInput(); goto P4a0o; bI10U: } public function unfavorite() { goto UZZvO; xI3wi: $Rup27 = $nIp2z->getTrimString('category'); goto rARaL; Txy5_: if ($R7X4g = $nIp2z->getTrimString('redirect')) { return Response::generate(0, null, null, $R7X4g); } goto NjD2I; UZZvO: $nIp2z = InputPackage::buildFromInput(); goto xI3wi; PTwow: BizException::throwsIfEmpty('categoryId为空', $OLo75); goto JFxcH; JFxcH: if (!MemberFavoriteUtil::exists(MemberUser::id(), $Rup27, $OLo75)) { return Response::generateError('未收藏'); } goto fLOz9; NjD2I: return Response::generateSuccess(); goto vOPWA; rARaL: $OLo75 = $nIp2z->getTrimString('categoryId'); goto AX30Z; AX30Z: BizException::throwsIfEmpty('category为空', $Rup27); goto PTwow; fLOz9: MemberFavoriteUtil::delete(MemberUser::id(), $Rup27, $OLo75); goto Txy5_; vOPWA: } }