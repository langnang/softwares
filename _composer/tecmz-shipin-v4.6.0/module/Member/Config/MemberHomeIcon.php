<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Member\Config; use Illuminate\Support\Str; class MemberHomeIcon { private static $menu = array(); public static function register($CCrc9) { self::$menu[] = $CCrc9; } public static function get() { goto V0swh; Ps7je: foreach (self::$menu as $qlKQK) { if ($qlKQK instanceof \Closure) { $qlKQK = call_user_func($qlKQK); } $CCrc9 = array_merge($CCrc9, $qlKQK); } goto PxxgS; V0swh: $CCrc9 = array(); goto Ps7je; PxxgS: $CCrc9 = self::mergeMenu($CCrc9); goto CTltP; CTltP: return $CCrc9; goto sehOW; sehOW: } private static function sort() { static $jYlxW = 1000; return $jYlxW++; } private static function mergeMenu($CCrc9, $O5e4c = '', $EgFVw = 1, $XM5aD = null) { goto Jo_Sq; Jo_Sq: if (empty($CCrc9)) { return array(); } goto kF2XW; rL0VC: foreach ($CCrc9 as $qlKQK) { goto Qkeg8; XEEdE: unset($KwRXA[$hBBDL]['children']); goto dnY7h; ZFH_1: if (1 == $EgFVw) { $hBBDL = $O5e4c . $qlKQK['title'] . '^' . $qlKQK['sort']; } else { $hBBDL = $O5e4c . $qlKQK['title']; } goto gG7cJ; zLBpn: if ($XM5aD) { if (!call_user_func($XM5aD, $qlKQK)) { continue; } } goto Vjdnz; Qkeg8: if (empty($qlKQK)) { continue; } goto zLBpn; gG7cJ: if (!isset($KwRXA[$hBBDL])) { $KwRXA[$hBBDL] = $qlKQK; } goto XEEdE; Vjdnz: if (!isset($qlKQK['sort'])) { $qlKQK['sort'] = self::sort(); } goto ZFH_1; dnY7h: if (!empty($qlKQK['children'])) { $KwRXA = array_merge($KwRXA, self::mergeMenu($qlKQK['children'], $hBBDL . '^^', $EgFVw + 1, $XM5aD)); } goto Qyo7u; Qyo7u: } goto s3_Sy; URzuu: return $KwRXA; goto Gaw7d; kF2XW: $KwRXA = array(); goto rL0VC; s3_Sy: if ($EgFVw == 1) { uasort($KwRXA, function ($PN01a, $pXhxi) { return $PN01a['sort'] - $pXhxi['sort']; }); return self::mergeMenuTree($KwRXA); } goto URzuu; Gaw7d: } private static function mergeMenuTree($cd49C, $O5e4c = '') { goto Ls4Fj; Ls4Fj: $cxHH0 = array(); goto BGAzx; BGAzx: foreach ($cd49C as $hBBDL => $p4EDY) { goto GQygx; Xn0Jt: $qlKQK = $p4EDY; goto CjxQ7; UpZom: $Ojuum = explode('^^', $hBBDL); goto Rq9ya; Rq9ya: if ($O5e4c) { if (!Str::startsWith($hBBDL, $O5e4c)) { continue; } if (count(explode('^^', $O5e4c)) !== count(explode('^^', $hBBDL))) { continue; } } else { if (1 != count($Ojuum)) { continue; } } goto Xn0Jt; nukPF: if (empty($qlKQK['children']) && empty($qlKQK['url'])) { continue; } goto sIszP; CjxQ7: $qlKQK['children'] = self::mergeMenuTree($cd49C, $hBBDL . '^^'); goto pA0R6; sIszP: $cxHH0[] = $qlKQK; goto wEVqB; GQygx: if ($hBBDL === $O5e4c) { continue; } goto UpZom; pA0R6: if (empty($qlKQK['children'])) { unset($qlKQK['children']); } goto nukPF; wEVqB: } goto CUrR4; CUrR4: return $cxHH0; goto S3f5Y; S3f5Y: } }