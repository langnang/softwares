<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Member\Admin\Controller; use Illuminate\Routing\Controller; use ModStart\Admin\Layout\AdminConfigBuilder; use ModStart\Form\Form; use ModStart\Support\Concern\HasFields; use Module\Vendor\Provider\Captcha\CaptchaProvider; class ConfigController extends Controller { public function setting(AdminConfigBuilder $Jf1S7) { goto a80TC; ROpNK: $Jf1S7->layoutPanel('安全设置', function ($Jf1S7) { $Jf1S7->switch('Member_LoginRedirectCheckEnable', '登录后跳转安全验证')->when('=', true, function (Form $oqTbu) { $oqTbu->textarea('Member_LoginRedirectWhiteList', '白名单')->placeholder('请输入域名白名单，每行一个，如：www.example.com'); }); $Jf1S7->switch('Member_DeleteEnable', '启用自助注销账号')->help('用户注销账号后，用户名会重置为随机字符串，已绑定的手机、邮箱均会解绑'); $Jf1S7->button('', '保存')->forSubmit(); }); goto VYwsI; VdP27: $Jf1S7->layoutPanel('账号安全', function ($Jf1S7) { $Jf1S7->switch('Member_ProfileEmailEnable', '开启邮箱绑定'); $Jf1S7->switch('Member_ProfilePhoneEnable', '开启手机绑定'); $Jf1S7->switch('retrieveDisable', '禁用找回密码')->when('!=', true, function ($Jf1S7) { $Jf1S7->switch('retrievePhoneEnable', '启用手机找回密码'); $Jf1S7->switch('retrieveEmailEnable', '启用邮箱找回密码'); }); $Jf1S7->button('', '保存')->forSubmit(); }); goto ROpNK; mrKqY: $Jf1S7->showReset(false)->showSubmit(false); goto gxxH7; gxxH7: return $Jf1S7->perform(); goto aBZrJ; XWcxW: $Jf1S7->pageTitle('功能设置'); goto ITH1X; VYwsI: $Jf1S7->formClass('wide'); goto xzf0n; a80TC: $ef9rn = array_merge(array('' => '默认'), CaptchaProvider::nameTitleMap()); goto XWcxW; ITH1X: $Jf1S7->layoutPanel('登录注册', function ($Jf1S7) use($ef9rn) { $Jf1S7->switch('loginCaptchaEnable', '启用登录验证码')->when('=', true, function (Form $oqTbu) use($ef9rn) { $oqTbu->select('loginCaptchaProvider', '登录验证码类型')->options($ef9rn); }); $Jf1S7->switch('Member_LoginPhoneEnable', '启用手机快捷登录')->when('=', true, function (Form $oqTbu) { $oqTbu->text('Member_LoginPhoneNameSuggest', '快捷注册用户名前缀')->defaultValue('用户')->help(join('', array('<p>默认为"用户"，用户注册后自动设置用户名和昵称为 "用户xxxx"。可以使用占位符，如"用户{Phone}"表示注册后自动设置为"用户+手机号"。</p>', '<p>{Phone}用户手机 {Phone4}手机后4位 {Uid}用户ID，如冲突将会自动追加随机字符串</p>'))); $oqTbu->switch('Member_LoginPhoneAutoRegister', '登录时自动注册')->help('开启后，用户使用手机号登录时，如果用户不存在则自动注册'); }); $Jf1S7->select('Member_LoginDefault', '默认登录方式')->options(array('default' => '用户名密码登录', 'phone' => '手机快捷登录')); $Jf1S7->switch('registerDisable', '禁用注册')->when('!=', true, function ($Jf1S7) { $Jf1S7->switch('registerEmailEnable', '启用邮箱注册'); $Jf1S7->switch('registerPhoneEnable', '启用手机注册'); $Jf1S7->switch('Member_RegisterPhoneEnable', '启用手机快捷注册'); $Jf1S7->select('Member_RegisterDefault', '默认注册方式')->options(array('default' => '用户名密码注册', 'phone' => '手机快捷注册')); })->when('=', true, function ($Jf1S7) { $Jf1S7->switch('registerOauthEnable', '允许以授权方式注册'); }); if (modstart_module_enabled('MemberOauth')) { $Jf1S7->switch('Member_OauthBindPhoneEnable', '授权登录绑定手机'); $Jf1S7->switch('Member_OauthBindEmailEnable', '授权登录绑定邮箱'); } $Jf1S7->number('Member_UsernameMinLength', '用户名最小长度')->defaultValue(3); $Jf1S7->button('', '保存')->forSubmit(); }); goto VdP27; xzf0n: $Jf1S7->disableBoxWrap(true); goto mrKqY; aBZrJ: } public function agreement(AdminConfigBuilder $Jf1S7) { goto j_R50; zowPx: $Jf1S7->switch('Member_AgreementEnable', '用户使用协议开启')->when('=', true, function ($Jf1S7) { $Jf1S7->text('Member_AgreementTitle', '用户使用协议标题')->help('默认为 用户使用协议'); $Jf1S7->richHtml('Member_AgreementContent', '用户使用协议内容'); }); goto nq1TD; nq1TD: $Jf1S7->switch('Member_PrivacyEnable', '用户隐私协议开启')->when('=', true, function ($Jf1S7) { $Jf1S7->text('Member_PrivacyTitle', '用户隐私协议标题')->help('默认为 用户隐私协议'); $Jf1S7->richHtml('Member_PrivacyContent', '用户隐私协议内容'); }); goto cYy9N; Zzr3m: return $Jf1S7->perform(); goto HICbS; j_R50: $Jf1S7->pageTitle('用户协议'); goto zowPx; cYy9N: $Jf1S7->formClass('wide'); goto Zzr3m; HICbS: } public function vip(AdminConfigBuilder $Jf1S7) { goto itY25; qPldK: return $Jf1S7->perform(); goto axzkB; itY25: $Jf1S7->pageTitle('用户VIP设置'); goto N3Se4; tB7s0: $Jf1S7->formClass('wide'); goto qPldK; N3Se4: $Jf1S7->text('Member_VipTitle', 'VIP开通标题')->help('默认为 开通尊贵VIP 享受更多权益'); goto kx3m8; kx3m8: $Jf1S7->text('Member_VipSubTitle', 'VIP开通副标题')->help('默认为 会员权益1 丨 会员权益2 丨 会员权益3 丨 会员权益4'); goto tB7s0; axzkB: } public function money(AdminConfigBuilder $Jf1S7) { goto Xuw4L; Xuw4L: $Jf1S7->pageTitle('用户钱包设置'); goto rmjfI; Qh5FS: $Jf1S7->switch('Member_MoneyChargeEnable', '开启钱包充值'); goto SEHa_; rmjfI: $Jf1S7->switch('Member_MoneyCashEnable', '开启用户提现')->when('=', 1, function (Form $oqTbu) { $oqTbu->number('Member_MoneyCashMin', '最小提现金额')->help('默认为 100'); $oqTbu->number('Member_MoneyCashTaxRate', '用户提现手续费')->help('如 1.00 表示手续费为 1.00%'); $oqTbu->richHtml('Member_MoneyCashDescription', '用户提现说明'); }); goto Qh5FS; FJtFH: return $Jf1S7->perform(); goto EPRak; SEHa_: $Jf1S7->richHtml('Member_MoneyChargeDesc', '钱包充值说明'); goto MK5Np; MK5Np: $Jf1S7->formClass('wide'); goto FJtFH; EPRak: } }