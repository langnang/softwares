<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Video\Core; use Illuminate\Events\Dispatcher; use Illuminate\Support\ServiceProvider; use ModStart\Admin\Config\AdminMenu; use ModStart\Admin\Widget\DashboardItemA; use ModStart\Core\Dao\ModelUtil; use ModStart\Core\Util\TreeUtil; use ModStart\Layout\Row; use ModStart\Module\ModuleManager; use Module\Banner\Provider\BannerPositionProvider; use Module\Vendor\Admin\Config\AdminWidgetDashboard; use Module\Vendor\Admin\Config\AdminWidgetLink; use Module\Vendor\Provider\HomePage\HomePageProvider; use Module\Video\Provider\VideoBannerPositionProvider; use Module\Video\Provider\VideoHomePageProvider; class ModuleServiceProvider extends ServiceProvider { public function boot(Dispatcher $V_pf2) { goto M1DT_; Aigrw: AdminMenu::register(function () { return array(array('title' => '视频管理', 'icon' => 'play', 'sort' => 150, 'children' => array(array('title' => '视频分类', 'url' => '\\Module\\Video\\Admin\\Controller\\VideoCategoryController@index'), array('title' => '视频管理', 'url' => '\\Module\\Video\\Admin\\Controller\\VideoController@index'))), array('title' => '功能设置', 'icon' => 'tools', 'sort' => 300, 'children' => array(array('title' => '简单视频', 'url' => '\\Module\\Video\\Admin\\Controller\\ConfigController@setting')))); }); goto IoxnT; M1DT_: AdminWidgetLink::register(function () { $CCrc9 = array(); $CCrc9[] = array('首页', modstart_web_url('video')); $cxHH0 = TreeUtil::modelToTree('video_category', array('name' => 'name')); $o8DhA = TreeUtil::treeToListWithIndent($cxHH0, 'id', 'name'); $CCrc9 = array_merge($CCrc9, array_map(function ($HuFy_) { return array('分类:' . $HuFy_['title'], modstart_web_url('video', array('categoryId' => $HuFy_['id']))); }, $o8DhA)); return array(AdminWidgetLink::build('简单视频', $CCrc9)); }); goto JtQn1; IoxnT: HomePageProvider::register(VideoHomePageProvider::class); goto S0IZT; JtQn1: AdminWidgetDashboard::registerIcon(function (Row $vTw5z) { $vTw5z->column(3, DashboardItemA::makeIconNumberTitle('iconfont icon-details', ModelUtil::count('video_category'), '视频分类', modstart_admin_url('video/video_category'))); $vTw5z->column(3, DashboardItemA::makeIconNumberTitle('iconfont icon-play', ModelUtil::count('video'), '视频总数', modstart_admin_url('video/video'))); }); goto Aigrw; S0IZT: if (ModuleManager::isModuleEnabled('Banner') && class_exists(BannerPositionProvider::class)) { BannerPositionProvider::register(VideoBannerPositionProvider::class); } goto x32Ux; x32Ux: } public function register() { } }