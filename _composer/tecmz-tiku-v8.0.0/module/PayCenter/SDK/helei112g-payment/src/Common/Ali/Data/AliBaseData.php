<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Payment\Common\Ali\Data; use Payment\Common\BaseData; use Payment\Utils\ArrayUtil; use Payment\Utils\Rsa2Encrypt; use Payment\Utils\RsaEncrypt; abstract class AliBaseData extends BaseData { public function getData() { goto Er5F9; qYPIt: $GeXSC = ArrayUtil::arraySort($GeXSC); goto RYuvu; RYuvu: return $GeXSC; goto hHSXN; Er5F9: $GeXSC = parent::getData(); goto qYPIt; hHSXN: } protected function makeSign($IRvxP) { switch ($this->signType) { case 'RSA': goto arfy7; EyvyC: break; goto ybQBX; arfy7: $KHNS_ = new RsaEncrypt($this->rsaPrivateKey); goto rpLz0; rpLz0: $GtgYE = $KHNS_->encrypt($IRvxP); goto EyvyC; ybQBX: case 'RSA2': goto R8GAG; eJU9i: break; goto oNknA; R8GAG: $KHNS_ = new Rsa2Encrypt($this->rsaPrivateKey); goto iolTo; iolTo: $GtgYE = $KHNS_->encrypt($IRvxP); goto eJU9i; oNknA: default: $GtgYE = ''; } return $GtgYE; } protected function buildData() { goto y2uHR; o0p3Y: $faet1 = ArrayUtil::paraFilter($faet1); goto Ewa1Z; M0WRI: if (in_array($this->method, array('alipay.trade.page.pay', 'alipay.trade.wap.pay'))) { $ja3LF['return_url'] = $this->returnUrl; } goto RqUGr; RqUGr: $this->retData = ArrayUtil::paraFilter($ja3LF); goto cCAzu; y2uHR: $faet1 = $this->getBizContent(); goto o0p3Y; Ewa1Z: $ja3LF = array('app_id' => $this->appId, 'method' => $this->method, 'format' => $this->format, 'charset' => $this->charset, 'sign_type' => $this->signType, 'timestamp' => $this->timestamp, 'version' => $this->version, 'notify_url' => $this->notifyUrl, 'biz_content' => json_encode($faet1, JSON_UNESCAPED_UNICODE)); goto M0WRI; cCAzu: } protected abstract function getBizContent(); }