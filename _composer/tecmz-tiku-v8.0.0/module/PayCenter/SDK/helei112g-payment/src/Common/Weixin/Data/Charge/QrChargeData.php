<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Payment\Common\Weixin\Data\Charge; use Payment\Common\PayException; use Payment\Utils\ArrayUtil; class QrChargeData extends ChargeBaseData { protected function buildData() { goto iGfmC; Jj64B: $ja3LF = array('appid' => trim($this->appId), 'mch_id' => trim($this->mchId), 'device_info' => $this->terminal_id, 'nonce_str' => $this->nonceStr, 'sign_type' => $this->signType, 'body' => trim($this->subject), 'attach' => trim($this->return_param), 'out_trade_no' => trim($this->order_no), 'fee_type' => $this->feeType, 'total_fee' => $this->amount, 'spbill_create_ip' => trim($this->client_ip), 'time_start' => $this->timeStart, 'time_expire' => $this->timeout_express, 'notify_url' => $this->notifyUrl, 'trade_type' => $this->tradeType, 'product_id' => $this->product_id, 'limit_pay' => $this->limitPay, 'openid' => $this->openid, 'scene_info' => $svIJz ? json_encode($svIJz, JSON_UNESCAPED_UNICODE) : '', 'sub_appid' => $this->sub_appid, 'sub_mch_id' => $this->sub_mch_id, 'sub_openid' => $this->sub_openid); goto kXW7z; UZrOK: if ($kkerk && is_array($kkerk)) { $svIJz['store_info'] = $kkerk; } goto Jj64B; To9Fn: $svIJz = array(); goto UZrOK; kXW7z: $this->retData = ArrayUtil::paraFilter($ja3LF); goto EWQO5; iGfmC: $kkerk = $this->scene_info; goto To9Fn; EWQO5: } protected function checkDataParam() { goto nVMtL; L1yzi: if (empty($UBWlO)) { throw new PayException('扫码支付,必须设置商品ID.'); } goto e1yTl; w7Ht5: $UBWlO = $this->product_id; goto L1yzi; nVMtL: parent::checkDataParam(); goto w7Ht5; e1yTl: } }