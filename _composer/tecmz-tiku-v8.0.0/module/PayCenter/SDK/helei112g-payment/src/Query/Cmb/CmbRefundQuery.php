<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Payment\Query\Cmb; use Payment\Common\Cmb\CmbBaseStrategy; use Payment\Common\Cmb\Data\Query\RefundQueryData; use Payment\Common\CmbConfig; use Payment\Config; class CmbRefundQuery extends CmbBaseStrategy { public function getBuildDataClass() { goto Z0K86; Hbtgn: if ($this->config->useSandbox) { $this->config->getewayUrl = 'http://121.15.180.66:801/netpayment_dl/BaseHttp.dll?QuerySettledRefund'; } goto AHE6h; Z0K86: $this->config->getewayUrl = 'https://payment.ebank.cmbchina.com/NetPayment/BaseHttp.dll?QuerySettledRefund'; goto Hbtgn; AHE6h: return RefundQueryData::class; goto WCQoq; WCQoq: } protected function retData(array $BEdDh) { goto tdh5e; tdh5e: $hBfCc = json_encode($BEdDh, JSON_UNESCAPED_UNICODE); goto kqxMe; gYP8w: foreach ($x6JEB as $Mlv3V => $REa1I) { $REa1I = explode(',', $REa1I); $x6JEB[$Mlv3V] = array_combine($hHdV0, $REa1I); } goto dnX1g; j08Si: return $eypYa; goto v3BWK; dnX1g: $eypYa = array('is_success' => 'T', 'response' => array('channel' => Config::CMB_REFUND, 'refund_data' => $x6JEB)); goto j08Si; Q3mxl: if ($this->config->returnRaw) { $eypYa['channel'] = Config::CMB_REFUND; return $eypYa; } goto WuD21; FHrQj: $hHdV0 = explode(',', $hHdV0); goto gYP8w; jUnt9: $eypYa = $this->sendReq($L2aCU); goto Q3mxl; WuD21: $x6JEB = $eypYa['dataList']; goto QulT1; QulT1: $x6JEB = str_replace('`', '', $x6JEB); goto L5TQG; kqxMe: $L2aCU = CmbConfig::REQ_FILED_NAME . '=' . $hBfCc; goto jUnt9; Vaj2B: $hHdV0 = array_shift($x6JEB); goto FHrQj; L5TQG: $x6JEB = explode(PHP_EOL, $x6JEB); goto Vaj2B; v3BWK: } }