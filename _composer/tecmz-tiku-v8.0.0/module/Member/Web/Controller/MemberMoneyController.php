<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Member\Web\Controller; use ModStart\App\Web\Layout\WebDialogPage; use ModStart\App\Web\Layout\WebPage; use ModStart\Core\Input\Request; use ModStart\Field\AbstractField; use ModStart\Field\AutoRenderedFieldValue; use ModStart\Grid\Grid; use ModStart\Repository\Filter\RepositoryFilter; use Module\Member\Auth\MemberUser; use Module\Member\Support\MemberLoginCheck; class MemberMoneyController extends MemberFrameController implements MemberLoginCheck { private $api; public function __construct() { parent::__construct(); $this->api = app(\Module\Member\Api\Controller\MemberMoneyController::class); } public function index(WebPage $gETpv) { goto BTL3D; sL5s4: list($Mi0Iq, $GmKGX) = $this->viewPaths('memberMoney.index'); goto UICSL; O5Ub1: $rWlsS->useSimple(function (AbstractField $QGYmu, $REa1I, $x1Lvn) { return AutoRenderedFieldValue::makeView('module::Member.View.pc.memberMoney.item', array('item' => $REa1I)); }); goto sL5s4; UICSL: return $gETpv->pageTitle('钱包')->view($Mi0Iq)->body($rWlsS)->handleGrid($rWlsS); goto pkvY1; VvEq8: $rWlsS->repositoryFilter(function (RepositoryFilter $qM7YH) { $qM7YH->where(array('memberUserId' => MemberUser::id())); }); goto Gc3yj; Gc3yj: $rWlsS->disableCUD()->disableItemOperate(); goto O5Ub1; BTL3D: $rWlsS = Grid::make('member_money_log'); goto VvEq8; pkvY1: } public function chargeDesc(WebDialogPage $gETpv) { $Qvp1e = modstart_config('Member_MoneyChargeDesc'); return $gETpv->pageTitle('钱包充值说明')->body("<div class='ub-html'>{$Qvp1e}</div>"); } }