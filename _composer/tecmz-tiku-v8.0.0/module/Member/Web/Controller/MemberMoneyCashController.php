<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Member\Web\Controller; use ModStart\App\Web\Layout\WebPage; use ModStart\Core\Input\Request; use ModStart\Field\AbstractField; use ModStart\Field\AutoRenderedFieldValue; use ModStart\Grid\Grid; use ModStart\Grid\GridFilter; use ModStart\Repository\Filter\RepositoryFilter; use Module\Member\Auth\MemberUser; use Module\Member\Support\MemberLoginCheck; use Module\Member\Util\MemberMoneyUtil; class MemberMoneyCashController extends MemberFrameController implements MemberLoginCheck { private $api; public function __construct(\Module\Member\Api\Controller\MemberMoneyCashController $lYtoi) { parent::__construct(); $this->api = $lYtoi; } public function index() { $GpKvi = MemberMoneyUtil::getTotal(MemberUser::id()); return $this->view('memberMoneyCash.index', array('pageTitle' => '钱包提现', 'total' => $GpKvi)); } public function log(WebPage $gETpv) { goto hYXtr; pcIWF: return $gETpv->pageTitle('钱包提现')->view($Mi0Iq)->body($rWlsS); goto Iu7gc; s5ekE: $rWlsS->useSimple(function (AbstractField $QGYmu, $REa1I, $x1Lvn) { return AutoRenderedFieldValue::makeView('module::Member.View.pc.memberMoneyCash.logItem', array('item' => $REa1I)); }); goto AraMA; AraMA: if (Request::isPost()) { return $rWlsS->request(); } goto zm6pa; hYXtr: $rWlsS = Grid::make('member_money_cash'); goto SZ0pr; m57ti: $rWlsS->disableCUD()->disableItemOperate(); goto s5ekE; zm6pa: list($Mi0Iq, $GmKGX) = $this->viewPaths('memberMoneyCash.log'); goto pcIWF; SZ0pr: $rWlsS->repositoryFilter(function (RepositoryFilter $qM7YH) { $qM7YH->where(array('memberUserId' => MemberUser::id())); }); goto m57ti; Iu7gc: } }