<?php
/**
 * ------------------------ 
 *  版权所有  www.tecmz.com
 *  商业版本请购买正版授权使用
 * ------------------------
*/ namespace Module\Member\Config; use Illuminate\Support\Str; class MemberHomeIcon { private static $menu = array(); public static function register($NOoJU) { self::$menu[] = $NOoJU; } public static function get() { goto gTTSO; eYNkS: $NOoJU = self::mergeMenu($NOoJU); goto oVmLJ; jhxOY: foreach (self::$menu as $REa1I) { if ($REa1I instanceof \Closure) { $REa1I = call_user_func($REa1I); } $NOoJU = array_merge($NOoJU, $REa1I); } goto eYNkS; oVmLJ: return $NOoJU; goto Xblai; gTTSO: $NOoJU = array(); goto jhxOY; Xblai: } private static function sort() { static $EnCPs = 1000; return $EnCPs++; } private static function mergeMenu($NOoJU, $JAbBw = '', $XaPco = 1, $qM7YH = null) { goto nx8K8; NJmjS: foreach ($NOoJU as $REa1I) { goto OSY48; OSY48: if (empty($REa1I)) { continue; } goto bH7by; iaixV: if (!isset($REa1I['sort'])) { $REa1I['sort'] = self::sort(); } goto RCnvH; RCnvH: if (1 == $XaPco) { $nJFbs = $JAbBw . $REa1I['title'] . '^' . $REa1I['sort']; } else { $nJFbs = $JAbBw . $REa1I['title']; } goto h9we9; cL9uB: if (!empty($REa1I['children'])) { $ImKSz = array_merge($ImKSz, self::mergeMenu($REa1I['children'], $nJFbs . '^^', $XaPco + 1, $qM7YH)); } goto ta_Lz; h9we9: if (!isset($ImKSz[$nJFbs])) { $ImKSz[$nJFbs] = $REa1I; } goto e3bmE; bH7by: if ($qM7YH) { if (!call_user_func($qM7YH, $REa1I)) { continue; } } goto iaixV; e3bmE: unset($ImKSz[$nJFbs]['children']); goto cL9uB; ta_Lz: } goto Iik6b; nx8K8: if (empty($NOoJU)) { return array(); } goto iFt3h; iFt3h: $ImKSz = array(); goto NJmjS; tjnCK: return $ImKSz; goto OdZaJ; Iik6b: if ($XaPco == 1) { uasort($ImKSz, function ($aYvm6, $QF8Y3) { return $aYvm6['sort'] - $QF8Y3['sort']; }); return self::mergeMenuTree($ImKSz); } goto tjnCK; OdZaJ: } private static function mergeMenuTree($RkakG, $JAbBw = '') { goto DBKzV; qDdJV: foreach ($RkakG as $nJFbs => $NIxlc) { goto X9eqp; H0gQe: if (empty($REa1I['children']) && empty($REa1I['url'])) { continue; } goto oGnsM; PQoQh: $REa1I['children'] = self::mergeMenuTree($RkakG, $nJFbs . '^^'); goto Hcvyg; jaFGl: $REa1I = $NIxlc; goto PQoQh; Hcvyg: if (empty($REa1I['children'])) { unset($REa1I['children']); } goto H0gQe; c5A7r: if ($JAbBw) { if (!Str::startsWith($nJFbs, $JAbBw)) { continue; } if (count(explode('^^', $JAbBw)) !== count(explode('^^', $nJFbs))) { continue; } } else { if (1 != count($Oh5ND)) { continue; } } goto jaFGl; X9eqp: if ($nJFbs === $JAbBw) { continue; } goto V0eGt; V0eGt: $Oh5ND = explode('^^', $nJFbs); goto c5A7r; oGnsM: $m0MLE[] = $REa1I; goto HbOP0; HbOP0: } goto TExMY; DBKzV: $m0MLE = array(); goto qDdJV; TExMY: return $m0MLE; goto JKge2; JKge2: } }